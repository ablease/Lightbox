<form action="/sign_up" method='post'>
  <div class="row">
    <div class="large-4 columns">
      <label>Full name
        <input type='text' name='name' placeholder="Type your full name here">
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-4 columns">
      <label>Your email
        <input type='email' name='email' placeholder="Type your email here">
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-4 columns">
      <label>Make a password
        <input id= 'password' type='text' name='password' placeholder='Make a password'>
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-4 columns">
      <label>Password repeated
        <input type='text' name='password_confirmation' placeholder='Repeat your password'>
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-4 columns">
      <label>Your GMC number
        <input type='text' name='gmc_number' placeholder="GMC Number">
      </label>
    </div>
  </div>

  <div class="row">
    <div class="large-4 columns">
      <label>
        <input type="hidden" id="genr_pub_key" name="genratepub_kay" value="geberated pgp-key">
      </label>
    </div>
  </div>

  <div class="row">
    <div class="large-4 columns">
      <label>
        <input id='sign_up' type='submit' name='sign_up' class="button" value="Sign Up">
      </label>
    </div>
  </div>
</form>


<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js'></script>

<script src='./js/encryption/aes.js'>
</script>

<script src='./js/encryption/api.js'>
</script>

<script src='./js/encryption/cryptico.js'>
</script>

<script src='./js/encryption/random.js'>
</script>

<script src='./js/encryption/rsa.js'>
</script>

<script>
var encrypt = document.getElementById('sign_up');
encrypt.addEventListener('click', function() {
  alert("got clicked");
  var get_PassPhrase= document.getElementById('password')
  alert(get_PassPhrase.value);
  var PassPhrase= get_PassPhrase.value
  var Bits = 1024;
  var local_user_key = cryptico.generateRSAKey(PassPhrase, Bits);
  var local_user_public_key = cryptico.publicKeyString(local_user_key);
  alert(local_user_public_key);
  document.getElementById("genr_pub_key").value = local_user_public_key;
  check_if_form_changed(local_user_public_key)
},

false);


function check_if_form_changed(local_user_public_key){
  if(document.getElementById("genr_pub_key").value == local_user_public_key) {
    alert('now in function addParameter');
    alert('Javascript successfully posted in hidden field');
  } else {
    alert('Adding Key to hidden field failed');
  }
}

</script>
